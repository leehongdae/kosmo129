<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
          "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="a.b.c.com.kos.like.dao.KosBoardLikeDAO">

<select id="kosBoardLikeSelect" parameterType="kosboardlikevo" resultType="kosboardlikevo">
		
	SELECT 	A.BLNUM BLNUM
	FROM 	SPRING_BOARD_LIKE A
	WHERE 	A.DELETEYN = 'Y'
	AND 	A.MNUM = #{mnum}
	AND 	A.BNUM = #{bnum}
	
</select>

<select id="kosBoardLikeSelectAll" parameterType="kosboardlikevo" resultType="kosboardlikevo">
	
	SELECT  *
	FROM 	SPRING_BOARD_LIKE A
	WHERE 	A.DELETEYN ='Y'
	AND 	A.MNUM = #{mnum}
	AND 	A.BNUM = #{bnum}	
	
</select>

<insert id="kosBoardLikeInsert" parameterType="kosboardlikevo" >
	
	INSERT INTO SPRING_BOARD_LIKE (BLNUM, MNUM, BNUM,
									DELETEYN, INSERTDATE, UPDATEDATE
								   )
						VALUES 	  ( (SELECT NVL(MAX(BLNUM), 0) + 1 AS BLNUM FROM SPRING_BOARD_LIKE),
									#{mnum},
									#{bnum},
									'Y',
									SYSDATE,
									SYSDATE
								   )
</insert>

<update id="kosBoardLikeUpdate_1" parameterType="kosboardlikevo">
	
	UPDATE  SPRING_BOARD_LIKE
	SET 	LIKE_CNT_1  = LIKE_CNT_1 + 1
		   ,UPDATEDATE  = SYSDATE
	WHERE 	MNUM = #{mnum}
	AND 	BNUM = #{bnum}
</update>

<update id="kosBoardLikeUpdate_2" parameterType="kosboardlikevo">
	
	UPDATE  SPRING_BOARD_LIKE
	SET 	LIKE_CNT_2  = LIKE_CNT_2 + 1
		   ,UPDATEDATE  = SYSDATE
	WHERE 	MNUM = #{mnum}
	AND 	BNUM = #{bnum}
</update>

	
</mapper> 